/**
 * 全站变灰样式
 * 用于特殊纪念日
 */

/*
 * 注意：
 * 不要对 body/html 直接设置 filter，否则会改变 position: fixed 的参照系，
 * 导致返回顶部等悬浮按钮位置异常（fixed 不再以视口为参照）。
 * 因此这里把灰度滤镜应用到页面主要层级与悬浮控件自身。
 */

/* 页面主要区域变灰（避免影响 fixed 定位） */
body.grayscale-mode #top-row,
body.grayscale-mode #banner-wrapper,
body.grayscale-mode #main-grid {
	filter: grayscale(100%);
	-webkit-filter: grayscale(100%);
	-moz-filter: grayscale(100%);
	-ms-filter: grayscale(100%);
	-o-filter: grayscale(100%);
}

/* 悬浮控件本身也变灰，但不影响其 fixed 定位 */
body.grayscale-mode .floating-controls-container {
	filter: grayscale(100%);
	-webkit-filter: grayscale(100%);
	-moz-filter: grayscale(100%);
	-ms-filter: grayscale(100%);
	-o-filter: grayscale(100%);
}

/* 确保子元素也继承变灰 */
body.grayscale-mode #top-row *,
body.grayscale-mode #banner-wrapper *,
body.grayscale-mode #main-grid *,
body.grayscale-mode .floating-controls-container * {
	filter: inherit;
}

/* 可选：为某些特殊元素保留颜色（如果需要的话） */
body.grayscale-mode .preserve-color {
	filter: none !important;
	-webkit-filter: none !important;
}

/* 添加一个提示横幅（可选） */
body.grayscale-mode::before {
	content: '';
	position: fixed;
	top: 0;
	left: 0;
	right: 0;
	height: 3px;
	background: #333;
	z-index: 10000;
	pointer-events: none;
}

