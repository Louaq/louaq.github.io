---
title: .nii数据的预处理
date: 2025-07-09 21:30:00
expires: 2025-08-21 23:59:59
mathjax: true
excerpt: "转换后的.npy文件数量与原始.nii文件数量的关系"
categories: 数据集
tags: [Dataset]
---
> .nii数据的预处理，参考F2Net

转换后的.npy文件数量与原始.nii文件数量的关系如下：

### 数量关系说明

1. **输入.nii文件**：每个病例包含5个.nii文件
   
   - FLAIR模态 (flair.nii)
   - T1模态 (t1.nii)
   - T1CE模态 (t1ce.nii)
   - T2模态 (t2.nii)
   - 分割掩码 (seg.nii)
   
2. **输出.npy文件**：每个.nii文件中包含多个切片(通常约155个轴向切片)，但代码只处理**包含肿瘤区域**的切片

3. **转换关系公式**：
   ```
   .npy文件总数 = 2 × 所有病例中包含肿瘤的切片总数
   ```

4. **具体说明**：
   - 每个包含肿瘤的切片会生成2个.npy文件：
     - 一个在trainImage文件夹(四模态图像数据)
     - 一个在trainGt文件夹(对应分割掩码)
   - 不包含肿瘤的切片会被跳过，不会生成.npy文件

### 举例说明

假设您有100个病例，每个病例的MRI体积包含155个切片，而每个病例平均有40个切片包含肿瘤区域：

- 原始.nii文件总数 = 100个病例 × 5个模态文件 = 500个文件
- 包含肿瘤的切片总数 = 100个病例 × 40个包含肿瘤的切片 = 4,000个切片
- 生成的.npy文件总数 = 4,000个切片 × 2个文件/切片 = 8,000个文件
  - trainImage文件夹: 4,000个文件
  - trainGt文件夹: 4,000个文件

因此，转换后的.npy文件数量通常会远多于原始.nii文件的数量，但具体倍数取决于每个病例中包含肿瘤的切片数量。这种转换将3D体积数据转换为适合2D CNN训练的单独切片，只保留了对训练有价值的含肿瘤区域的切片。

